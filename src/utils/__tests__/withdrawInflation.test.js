import { getVotePresets } from '../vote-presets'
import { encodeCallScript } from '../voting-scripts'

describe('withdrawInflationAndPegin', () => {
  test('Should match the generated script', async () => {
    const presets = getVotePresets({
      presetParams: { 0: '1', 2: '0xa41657bf225F8Ec7E2010C89c3F084172948264D' },
      setPresetParams: () => null,
      provider: () => null
    })
    const preset = presets['withdrawInflationAndPegin']
    const actions = await preset.prepare()
    const script = encodeCallScript(actions)

    const expectedScript =
      '0x00000001f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b2000000443352d49b000000000000000000000000dd92eb1478d3189707ab7f4a5ace3a615cdd04760000000000000000000000000000000000000000000000000de0b6b3a7640000dd92eb1478d3189707ab7f4a5ace3a615cdd047600000064beabacc8000000000000000000000000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b20000000000000000000000002211bfd97b1c02ae8ac305d206e9780ba7d8bff40000000000000000000000000000000000000000000000000de0b6b3a7640000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b200000044095ea7b3000000000000000000000000e396757ec7e6ac7c8e5abe7285dde47b98f22db80000000000000000000000000000000000000000000000000de0b6b3a7640000e396757ec7e6ac7c8e5abe7285dde47b98f22db800000124c322525d0000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b200000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000010000f1918e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a307861343136353762663232354638456337453230313043383963334630383431373239343832363444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'

    expect(script).toStrictEqual(expectedScript)
  })

  test('Should match the generated script with custom userData and chainID', async () => {
    const presets = getVotePresets({
      presetParams: { 0: '10', 1: '0x0075dd4c', 2: '0xb794f5ea0ba39494ce839613fffba74279579268', 3: '0xdeadbeef' },
      setPresetParams: () => null,
      provider: () => null
    })
    const preset = presets['withdrawInflationAndPegin']
    const actions = await preset.prepare()
    const script = encodeCallScript(actions)

    const expectedScript =
      '0x00000001f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b2000000443352d49b000000000000000000000000dd92eb1478d3189707ab7f4a5ace3a615cdd04760000000000000000000000000000000000000000000000008ac7230489e80000dd92eb1478d3189707ab7f4a5ace3a615cdd047600000064beabacc8000000000000000000000000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b20000000000000000000000002211bfd97b1c02ae8ac305d206e9780ba7d8bff40000000000000000000000000000000000000000000000008ac7230489e80000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b200000044095ea7b3000000000000000000000000e396757ec7e6ac7c8e5abe7285dde47b98f22db80000000000000000000000000000000000000000000000008ac7230489e80000e396757ec7e6ac7c8e5abe7285dde47b98f22db800000144c322525d0000000000000000000000000000000000000000000000008ac7230489e80000000000000000000000000000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b200000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001000075dd4c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a307862373934663565613062613339343934636538333936313366666662613734323739353739323638000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004deadbeef00000000000000000000000000000000000000000000000000000000'

    expect(script).toStrictEqual(expectedScript)
  })
})
