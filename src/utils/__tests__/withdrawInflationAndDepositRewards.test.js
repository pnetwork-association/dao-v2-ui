import { getVotePresets } from '../vote-presets'
import { encodeCallScript } from '../voting-scripts'

describe('withdrawInflationAndDepositRewards', () => {
  test('Should match the generated script', async () => {
    const presets = getVotePresets({
      presetParams: { 0: '100', 1: '4' },
      setPresetParams: () => null,
      provider: () => null
    })
    const preset = presets['withdrawInflationAndDepositRewards']
    const actions = await preset.prepare()
    const script = encodeCallScript(actions)

    const expectedScript =
      '0x00000001f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b2000000443352d49b000000000000000000000000dd92eb1478d3189707ab7f4a5ace3a615cdd04760000000000000000000000000000000000000000000000056bc75e2d63100000dd92eb1478d3189707ab7f4a5ace3a615cdd047600000064beabacc8000000000000000000000000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b20000000000000000000000002211bfd97b1c02ae8ac305d206e9780ba7d8bff40000000000000000000000000000000000000000000000056bc75e2d63100000f4ea6b892853413bd9d9f1a5d3a620a0ba39c5b200000044095ea7b3000000000000000000000000d60792770ca2b54b9231041c8af641f48818da8d0000000000000000000000000000000000000000000000056bc75e2d63100000d60792770ca2b54b9231041c8af641f48818da8d000002a4996adf550000000000000000000000000000000000000000000000056bc75e2d631000000000000000000000000000002422eb5b6a20c7b8e3567c12ed6f5ed9d1cf1f79000000000000000000000000000000000000000000000000000000000000008000f1918e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000008805aa0c1a8e59b03fa95740f691e28942cf44f60000000000000000000000002ec44f9f31a55b52b3c1ff98647e38d63f829fb70000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000044095ea7b30000000000000000000000002ec44f9f31a55b52b3c1ff98647e38d63f829fb70000000000000000000000000000000000000000000000056a6418b505860000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044dc5e3ccd00000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000056a6418b50586000000000000000000000000000000000000000000000000000000000000'

    expect(script).toStrictEqual(expectedScript)
  })
})
